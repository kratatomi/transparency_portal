{% extends "base.html" %}

{% block app_content %}
<div class="list-group">
  <a href="#" class="list-group-item list-group-item-action flex-column align-items-start active">
    <div class="d-flex w-100 justify-content-between">
      <h5 class="mb-1">Proposal #{{ proposal.id }}</h5>
        {% if proposal.open %}
        <b><p style="color:rgb(0,200,0);">Open</p></b>
        {% else %}
            <b><p style="color:rgb(250,0,0);">Closed</p></b>
            <H3><p class="text-right">Final result:</p></H3>
            <H3><p class="text-right">{{ proposal.result }}</p></H3>
        {% endif %}
    </div>
      <p class="mb-1"><b>Proposal description:</b> {{ proposal.proposal }}</p>
      <small><b>Author:</b> {{ proposal.proposal_author }}</small>
      <small><b>Start date:</b> {{ proposal.start_time }} - <b>Deadline:</b> {{ proposal.end_time }} UTC Time <p class="text-right"><b><a href="https://transparency.smartindex.cash/static/calendar/Proposal{{proposal.id}}.ics">Add to your calendar</a></b></p></small>
  </a>
  {% if proposal.option_a_tag %}
          <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1">{{ proposal.option_a_tag }}</h5>
            </div>
            <p class="mb-1">{{ proposal.option_a_votes }} [OPTION: A]</p>
          </a>
  {% endif %}
  {% if proposal.option_b_tag %}
          <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1">{{ proposal.option_b_tag }}</h5>
            </div>
            <p class="mb-1">{{ proposal.option_b_votes }} [OPTION: B]</p>
          </a>
  {% endif %}
    {% if proposal.option_c_tag %}
          <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1">{{ proposal.option_c_tag }}</h5>
            </div>
            <p class="mb-1">{{ proposal.option_c_votes }} [OPTION: C]</p>
          </a>
  {% endif %}
            <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1">REJECT</h5>
            </div>
            <p class="mb-1">{{ proposal.reject_votes }} [OPTION: {{ proposal.reject_option }}]</p>
          </a>
</div>

<div class="container">
    <H2>Voting instructions</H2>
    <ul>
        <li>Open the "write" section of the checkbook.cash app: <a href="https://checkbook.cash/app/write">click here.</a></li>
        <li>You will find there multiple text fields, fill them with this parameters:</li>
        <ul>
            <li><b>Token's Address:</b> 0xF05bD3d7709980f60CD5206BddFFA8553176dd29 (SIDX contract address)</li>
            <li><b>Payees's Addresses:</b> 0xa3533751171786035fC440bFeF3F535093EAd686 (this is a voting wallet owned by SmartIndex admin)</li>
            <li><b>Amount to Send to Each Payee:</b> this is the amount of SIDX tokens you want to send for voting. The more tokens you send, the more chances for your choice to be approved.
</li>
            <li><b>Deadline/Expiry Date:</b> the deadline must be equal or higher than the proposal's deadline, which is {{ proposal.end_time }} for this proposal. Remember that we are always working with UTC time.</li>
            <li><b>Tag:</b> this field is optional but highly advisable. Put a random text and check the box "This is a secret tag". This way not only the admin cannot claim your tokens, but even if the frontend gets hacked, nobody can steal your tokens.</li>
            <li><b>Memo:</b> in this field is where you provide your chosen option, and always have the format #ID:OPTION. For proposal {{ proposal.id }}, the options available are: </li>
            <ul>
                {% if proposal.option_a_tag %}
                <li>{{ proposal.option_a_tag }}: write #{{ proposal.id }}:A in memo field.</li>
                {% endif %}
                {% if proposal.option_b_tag %}
                <li>{{ proposal.option_b_tag }}: write #{{ proposal.id }}:B in memo field.</li>
                {% endif %}
                {% if proposal.option_c_tag %}
                <li>{{ proposal.option_c_tag }}: write #{{ proposal.id }}:C in memo field.</li>
                {% endif %}
                <li>REJECT: write #{{ proposal.id }}:{{ proposal.reject_option }} in memo field.</li>
            </ul>
        </ul>
    </ul>
</div>
<hr>
<center><h3>Go back to <a href="{{ url_for('proposals') }}">Proposals page</a>.</h3></center>
{% endblock %}